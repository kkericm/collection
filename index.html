<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Damn Son</title>
    <link rel="shortcut icon" href="assets/img/arc_feliz.ico" type="image/x-icon">
    <link rel="stylesheet" href="assets/css/sheet1.css">
    <link rel="stylesheet" href="assets/css/sheet-confi.css">
    <link rel="stylesheet" href="assets/css/sheet-note.css">
    <link rel="stylesheet" href="assets/css/sheet-menus.css">
</head>
<body class="light">
    <div id=root>
        <img src="https://preview.redd.it/imagem-aleat%C3%B3ria-v0-q6vhcpl3btpa1.jpg?auto=webp&s=9f25d5fbc2092900e358fa02fb8493dbbd6a264b" id="bg">
        
        <div class="dialog-container fix hidden">
            <div class="normal-dialog hidden" id="about">
                <div class="header">
                    <label for="header">About</label>
                    <button onclick="closeDialog()"><img src="assets/img/close.png"></button>
                </div>
                <div class="main">
                    <img src="assets/img/icon.png" alt="kkericm">
                    <h3>Eric???</h3>
                    <div class="foot">
                        <a href="https://github.com/kkericm">
                            <img src="assets/img/github-mark-white.png" alt="">
                            <label style="align-content: center;">GitHub</label>
                        </a>
                        <a href="https://t.me/oEric1" id="telegram">
                            <img src="assets/img/telegram-logo.png" alt="">
                            <label style="align-content: center;">Telegram</label>
                        </a>
                    </div>
                </div>
            </div>
            <div class="normal-dialog hidden" id="settings">
                <div class="header">
                    <label for="header">About</label>
                    <button onclick="closeDialog()"><img src="assets/img/close.png"></button>
                </div>
                <div class="main">
                    <div class="theme-settings">
                        <h3>Theme</h3>
                        <div>
                            <input type="radio" name="theme-radio">
                            <label>Light</label>
                            <input type="radio" name="theme-radio">
                            <label>Dark</label>
                        </div>
                    </div>
                </div>
                <div class="footer">
                    <button onclick="saveSettings()">Save</button>
                </div>
                
            </div>
        </div>
        

        <div id=content>
            <header>
                <div class="menu hidden">
                    <button onclick="settingsShow()">
                        <img src="assets/img/config.png" alt="">
                        <label>Settings</label>
                    </button>
                    <button onclick="openDialogMenu('about')">
                        <img src="assets/img/about.png" alt="">
                        <label>About</label>
                    </button>
                </div>
                <button class="menuButton" onclick="changeMenu(this)">
                    <img src="assets/img/menu.png" alt="">
                </button>
                <a href=".">
                    <img src="assets/img/arc_feliz.ico" alt="">
                    <h1>Damn Son</h1>
                </a>
            </header>
            <main></main>
            <footer>
                <a href="https://github.com/kkericm/collection">
                    <img src="assets/img/github-mark-white.png" alt="">
                    <label style="align-content: center;">GitHub</label>
                </a>
                <a href="https://t.me/oEric1" id="telegram">
                    <img src="assets/img/telegram-logo.png" alt="">
                    <label style="align-content: center;">Telegram</label>
                </a>
            </footer>
        </div>
    </div>

    <script>
        const db = {
            themes: [
                "light",
                "dark"
            ]
        }
        
        var configSheets = {
            theme: db.themes[parseInt(getCookie("theme"))]
        }

        function update(config = configSheets) {
            document.body.className = config.theme
        }
        

        function getCookie(key) {
            let cookies = document.cookie;
            if (cookies.includes(';')) {
                for (let i of cookies.split(";")) {
                    if (i.startsWith(key)) {
                        return i.split('=')[1]
                    }
                }
            } else {
                return cookies.startsWith(key) ? cookies.split("=")[1] : undefined
            }
        }

        function addCookie(key, value, espire=1, path="/") {
            var expDate = new Date();
            expDate.setTime(expDate.getTime() + (espire * 60 * 60 * 1000));
            document.cookie = `${key}=${value}; expires=${expDate.toUTCString()}; path=${path};`
        }

        function changeMenu() {
            let menu = document.querySelector(".menu");
            if (menu.classList.contains("hidden")) {
                document.querySelector(".menuButton > img").src = "assets/img/close.png";
                menu.classList.remove("hidden");

                menu.classList.remove("qtoleft");
                menu.classList.add("stoleft");
            } else {
                document.querySelector(".menuButton > img").src = "assets/img/menu.png";
                menu.classList.remove("stoleft");
                menu.classList.add("qtoleft");
                setTimeout(() => {
                    menu.classList.add("hidden");
                }, 500)
            }
        }
        
        function closeDialog() {
            let dialog = document.querySelector(".dialog-container > :not(.hidden)");
            let container = document.querySelector(".dialog-container");
            
            container.classList.remove("show");
            container.classList.add("quit");
            setTimeout(() => {
                dialog.classList.add("hidden");
                container.classList.add("hidden");
            }, 500);
        }
        
        function openDialogMenu(dialogName) {
            document.querySelector(".menuButton > img").src = "assets/img/menu.png";

            // document.querySelector(".menu").classList.add("hidden");
            changeMenu()
            document.querySelector(`#${dialogName}`).classList.remove("hidden");
            
            let container = document.querySelector(".dialog-container");

            container.classList.remove("hidden");
            container.classList.remove("quit");
            container.classList.add("show");
        }

        function settingsShow() {
            document.querySelectorAll(".theme-settings input[name=theme-radio]").item(parseInt(getCookie("theme"))).checked = true

            openDialogMenu('settings')
        }

        function saveSettings() {
            let guest = {
                theme: 0
            }
            document.querySelectorAll(".theme-settings input[name=theme-radio]").forEach((d, e) => {
                if (d.checked) {
                    addCookie("theme", e);
                    guest.theme = db.themes[e];
                }
            })
            update(guest)
            closeDialog()
        }

        update()
    </script>
</body>
</html>